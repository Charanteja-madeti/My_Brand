<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Charan's Store - All In One</title>
  <style>
    body { font-family: Arial; background: #f9f9f9; margin: 0; padding: 20px; }
    nav a { margin-right: 15px; text-decoration: none; color: #007bff; }
    nav { margin-bottom: 20px; }
    .section { display: none; }
    .active { display: block; }
    .product { border: 1px solid #ccc; padding: 10px; margin: 10px; width: 200px; text-align: center; background: #fff; border-radius: 8px; }
    .products { display: flex; flex-wrap: wrap; }
    .cart { float: right; font-weight: bold; }
    #searchInput { margin: 10px 0; padding: 5px; width: 200px; }
    .payment-section img { border-radius: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>

  <h1>üõçÔ∏è Charan's Store</h1>
  <div class="cart">üß∫ <span id="cartCount">0</span> items - ‚Çπ<span id="cartTotal">0</span></div>

  <!-- Navigation -->
  <nav>
    <a href="#" onclick="showSection('home')">Home</a>
    <a href="#" onclick="showSection('products')">Products</a>
    <a href="#" onclick="showSection('cart')">Cart</a>
    <a href="#" onclick="showSection('customer')">Customer Details</a>
    <a href="#" onclick="showSection('payment')">Payment</a>
    <a href="#" onclick="showSection('contact')">Contact</a>
  </nav>

  <!-- Home -->
  <div id="home" class="section active">
    <h2>Welcome to Charan's Store</h2>
    <p>Shop your favorite items, pay with UPI, and get your order delivered!</p>
  </div>

  <!-- Products -->
  <div id="products" class="section">
    <h2>üõí Products</h2>
    <input type="text" id="searchInput" onkeyup="filterProducts()" placeholder="Search products..." />
    <div class="products" id="productList">
      <div class="product" data-name="Product 1" data-price="100">
        <img src="git1.jpg" width="150"><br>
        <strong>Product 1</strong><br>‚Çπ100<br>
        <button onclick="addToCart(100)">Add to Cart</button>
      </div>
      <div class="product" data-name="Product 2" data-price="150">
        <img src="git2.jpg" width="150"><br>
        <strong>Product 2</strong><br>‚Çπ150<br>
        <button onclick="addToCart(150)">Add to Cart</button>
      </div>
    </div>
    <p id="noMatchMessage" style="display:none; color:gray;">No products found.</p>
  </div>

  <!-- Cart -->
  <div id="cart" class="section">
    <h2>üß∫ Your Cart</h2>
    <p>Items in cart: <span id="cartCountDisplay">0</span></p>
    <p>Total: ‚Çπ<span id="cartTotalDisplay">0</span></p>
  </div>

  <!-- Customer Details -->
  <div id="customer" class="section">
    <h2>üßë Customer Details</h2>
    <form id="customerForm" action="https://formsubmit.co/madeticharanteja19@gmail.com" method="POST" onsubmit="return fillCartDetails()">
      <label>Full Name:<br><input type="text" name="Customer Name" id="name" required></label><br><br>
      <label>Phone Number:<br><input type="tel" name="Phone Number" id="phone" required></label><br><br>
      <label>Address:<br><textarea name="Address" id="address" rows="4" required></textarea></label><br><br>
      <label>Email:<br><input type="email" name="Email" id="email"></label><br><br>
      <label>Delivery Slot:<br>
        <select name="Delivery Slot" id="slot" required>
          <option value="">Select a slot</option>
          <option>Morning (9 AM - 12 PM)</option>
          <option>Afternoon (12 PM - 4 PM)</option>
          <option>Evening (4 PM - 8 PM)</option>
        </select>
      </label><br><br>
      <input type="hidden" name="Cart Items" id="cartCountForm">
      <input type="hidden" name="Total Amount" id="cartTotalForm">
      <button type="submit">Submit Details</button>
    </form>
  </div>

  <!-- Payment -->
  <div id="payment" class="section">
    <h2>üí≥ UPI Payment</h2>
    <img id="qrCode" width="250" height="250" alt="QR Code"><br><br>
    <p><strong>UPI ID:</strong> <span id="upiIdText">7601017851@naviaxis</span>
      <button onclick="copyUPIID()">üìã Copy</button>
    </p>
  </div>

  <!-- Contact -->
  <div id="contact" class="section">
    <h2>üìß Contact Us</h2>
    <form action="https://formsubmit.co/madeticharanteja19@gmail.com" method="POST">
      <label>Name:<br><input type="text" name="name" required></label><br><br>
      <label>Email:<br><input type="email" name="email" required></label><br><br>
      <label>Message:<br><textarea name="message" rows="5" cols="40" required></textarea></label><br><br>
      <button type="submit">Send Message</button>
    </form>
  </div>

  <script>
    let cartCount = parseInt(localStorage.getItem("cartCount")) || 0;
    let cartTotal = parseInt(localStorage.getItem("cartTotal")) || 0;
    updateCartDisplay();
    loadCustomerForm();

    function showSection(id) {
      document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      if (id === 'payment') generateDynamicQR();
    }

    function addToCart(price) {
      cartCount += 1;
      cartTotal += price;
      localStorage.setItem("cartCount", cartCount);
      localStorage.setItem("cartTotal", cartTotal);
      updateCartDisplay();
      alert("Item added to cart. Total: ‚Çπ" + cartTotal);
    }

    function updateCartDisplay() {
      document.getElementById("cartCount").innerText = cartCount;
      document.getElementById("cartTotal").innerText = cartTotal;
      document.getElementById("cartCountDisplay").innerText = cartCount;
      document.getElementById("cartTotalDisplay").innerText = cartTotal;
    }

    function filterProducts() {
      const input = document.getElementById("searchInput").value.toLowerCase();
      const products = document.querySelectorAll(".product");
      let found = false;
      products.forEach(p => {
        const name = p.getAttribute("data-name").toLowerCase();
        if (name.includes(input)) {
          p.style.display = "block";
          found = true;
        } else {
          p.style.display = "none";
        }
      });
      document.getElementById("noMatchMessage").style.display = found ? "none" : "block";
    }

    function copyUPIID() {
      const upiId = document.getElementById("upiIdText").innerText;
      navigator.clipboard.writeText(upiId).then(() => alert("‚úÖ UPI ID copied!"));
    }

    function generateDynamicQR() {
      const upiId = "7601017851@naviaxis";
      const name = "MADETI CHARAN TEJA";
      const amount = cartTotal;
      const upiUrl = `upi://pay?pa=${upiId}&pn=${encodeURIComponent(name)}&am=${amount}&cu=INR`;
      const qrApi = `https://chart.googleapis.com/chart?cht=qr&chs=250x250&chl=${encodeURIComponent(upiUrl)}`;
      document.getElementById("qrCode").src = qrApi;
    }

    function fillCartDetails() {
      // Save customer form data to localStorage
      const name = document.getElementById("name").value;
      const phone = document.getElementById("phone").value;
      const address = document.getElementById("address").value;
      const email = document.getElementById("email").value;
      const slot = document.getElementById("slot").value;

      localStorage.setItem("cust_name", name);
      localStorage.setItem("cust_phone", phone);
      localStorage.setItem("cust_address", address);
      localStorage.setItem("cust_email", email);
      localStorage.setItem("cust_slot", slot);

      // Set hidden fields for form
      document.getElementById("cartCountForm").value = cartCount;
      document.getElementById("cartTotalForm").value = "‚Çπ" + cartTotal;

      return true;
    }

    function loadCustomerForm() {
      document.getElementById("name").value = localStorage.getItem("cust_name") || "";
      document.getElementById("phone").value = localStorage.getItem("cust_phone") || "";
      document.getElementById("address").value = localStorage.getItem("cust_address") || "";
      document.getElementById("email").value = localStorage.getItem("cust_email") || "";
      document.getElementById("slot").value = localStorage.getItem("cust_slot") || "";
    }
  </script>
</body>
</html>
